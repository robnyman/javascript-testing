Lately I've been investigating newer versions of JavaScript, and what web browser support they have. And, as usual when I create something I find useful, I want to share it with the world. :-)

<!--more-->

<h2>How JavaScript has evolved</h2>

Web development life for most of us is based on JavaScript 1.5, or corresponding support in JScript for IE and ECMAScript 3 (more info can be found in <a href="http://ejohn.org/blog/versions-of-javascript/">John Resig's Versions of JavaScript</a>). But what's beyond that? Mozilla, especially due to having JavaScript creator <a href="http://en.wikipedia.org/wiki/Brendan_Eich">Brendan Eich</a> on board, have been pushing JavaScript feature support forward.

I have looked at the three latest issued releases of JavaScript: 1.6, 1.7 and 1.8, tested the code in various web browsers and evaluated the results.

<h2>The JavaScript tests and compatibility tables</h2>

For this, I've created <a href="http://www.robertnyman.com/javascript/">a mini-web site for JavaScript testing and web browser compatibility</a>, which offers you:

<ul>
	<li>JavaScript tests which runs immediately in your web browser</li>
	<li>Web browser compatibility tables</li>
	<li>Code examples, together with expected results (when tests were successful)</li>
</ul>

It currently contains three sub-sections for each version of JavaScript:

<ul>
	<li><a href="http://www.robertnyman.com/javascript/javascript-1.6.html">Testing JavaScript 1.6</a></li>
	<li><a href="http://www.robertnyman.com/javascript/javascript-1.7.html">Testing JavaScript 1.7</a></li>
	<li><a href="http://www.robertnyman.com/javascript/javascript-1.8.html">Testing JavaScript 1.8</a></li>
</ul>

It should also be noted, for anyone looking for support in Internet Explorer, that neither IE 6, IE 7 or IE 8 supports anything of this...

Below I will list the new features for each JavaScript language release of these three, and code examples. All of this code, runnable, is also available in the test site, but listed here for convenience for anyone who wants to get a overview of the new features.

<h2>JavaScript 1.6</h2>

<ul>
	<li>
		Array extras
		<ul>
			<li>indexOf</li>
			<li>lastIndexOf</li>
			<li>every</li>
			<li>filter</li>
			<li>forEach</li>
			<li>map</li>
			<li>some</li>
		</ul>
	</li>
	<li>
		Array and String generics
		<ul>
			<li>Array generics</li>
			<li>String generics</li>
		</ul>
	</li>
</ul>

(For complete information and documentation, read <a href="https://developer.mozilla.org/en/New_in_JavaScript_1.6">New in JavaScript 1.6</a>.)
		
<h3>Array extras</h3>

New features to enhance the usability of <code>array</code> objects.
		
<h4>The indexOf method</h4>

Returns the index of the first occurrence of the item.

<pre class="brush: js">var arr = ["Microsoft", "Mozilla", "Apple"];
arr.indexOf("Mozilla");</pre>


<h4>The lastIndexOf method</h4>

Returns the index of the last occurrence of the item.

<pre class="brush: js">var arr = ["Firefox", "IE", "Chrome", "Firefox"];
arr.lastIndexOf("Firefox");</pre>
		
<h4>The every method</h4>

Runs a function on each item in the <code>Array</code>, while it returns true.

<pre class="brush: js">var arr = [4, 7, 10];
arr.every(function (value) {
	return value &gt; 5;
});</pre>
			
				
<pre class="brush: js">var arr = [6, 7, 10];
arr.every(function (value) {
	return value &gt; 5;
});</pre>


<h4>The filter method</h4>

Runs a function to filter an <code>Array</code>, and returns all items where the function returned true.

<pre class="brush: js">var arr = [4, 7, 10];
arr.filter(function (value) {
	return value > 5;
});</pre>

	
<h4>The forEach method</h4>

Runs a function on each item in an <code>array</code>.

<pre class="brush: js">var arr = ["Firefox", "IE", "Chrome", "Opera", "Safari"]
	resultValues = [];
arr.forEach(function (value) {
	resultValues.push(value.toUpperCase());
});</pre>


<h4>The map method</h4>

Runs a function on each item, and returns the results in an <code>array</code>.

<pre class="brush: js">var arr = [4, 7, 10];
arr.map(function (value) {
	return value + 5;
});</pre>


<h4>The some method</h4>

Runs a function on each item in the <code>Array</code>, while it returns false.

<pre class="brush: js">var arr = [4, 7, 10];
arr.some(function (value) {
	return value &gt; 5;
});</pre>	
		
<pre class="brush: js">var arr = [1, 2, 4];
arr.some(function (value) {
	return value &gt; 5;
});</pre>
		
		
<h3>Array and String generics</h3>

Using methods from other object types to enhance the existing one. I.e. use <code>String</code> methods on <code>Array</code> objects, and <code>Array</code> methods on <code>String</code> objects.
		
<h4>Array generics</h4>
<pre class="brush: js">var words = "These are just words";
Array.filter(words, function (value) {
	return value.indexOf("s") === -1;
});</pre>
		
<h4>String generics</h4>	
			
<pre class="brush: js">var arr = ["Firefox", "Safari", "Opera"];
String.replace(arr, /[aoueiy]/g, "");</pre>

		
<h2>JavaScript 1.7</h2>
<ul>
	<li>
		Generators and Iterators
		<ul>
			<li>Generators</li>
			<li>Iterators</li>
		</ul>
	</li>
	<li>Array comprehensions</li>
	<li>
		Using let for block scope
		<ul>
			<li>let statement</li>
			<li>let expression</li>
			<li>let definition</li>
		</ul>
	</li>
	<li>Destructuring assignment</li>
	<li>Destructuring assignment with let statement</li>
</ul>

(For complete information and documentation, read <a href="https://developer.mozilla.org/en/New_in_JavaScript_1.7">New in JavaScript 1.7</a>.)

		
<h3>Generators and Iterators</h3>

Helper features for iterating over items.

<h4>Generators</h4>

Creating generator iterators with the <code>yield</code> keyword, to have state variables.

<pre class="brush: js">function double5() {
	var i=0, j=5, k;
	while (true) {
		yield i;
		k = i;
		i = j;
		j += i;
	}
}

var g = double5(),
	resultValues = [];
for (var i=0; i&lt;5; i++) {
	resultValues.push(g.next());
}</pre>
		
<h4>Iterators</h4>

A special object making it easier to iterate over a certain amount of informat√≠on.

<pre class="brush: js">var lostInfo = {
	name : "Lost",
	location : "Island",
	numbers : "4 8 15 16 23 42"
};

var iteratorObj = Iterator(lostInfo),
	resultValues = [],
	next;
try{
	while (true) {
		next = iteratorObj.next();
		resultValues.push(next[0] + ": " + next[1]);
	}
}
catch (err if err instanceof StopIteration) {  
	resultValues.push("END OF LIST");
}
catch (err) {  
	resultValues.push("UNKNOWN ERROR");
}</pre>
			
<pre class="brush: js">var lostInfo = {
	name : "Lost",
	location : "Island",
	numbers : "4 8 15 16 23 42"
};

// Notice true below - will return only parameter names and not values, as opposed to the example above
var iteratorObj = Iterator(lostInfo, true),
	resultValues = [];
try{
	while (true) {
		resultValues.push(iteratorObj.next());
	}
}
catch (err if err instanceof StopIteration) {  
	resultValues.push("END OF LIST");
}
catch (err) {  
	resultValues.push("UNKNOWN ERROR");
}</pre>
		
		
<h3>Array comprehensions</h3>

Powerful initialization of arrays.
		
<pre class="brush: js">function setVal (start, end) {
	for (let i=start; i&lt;end; ++i) {
		yield i;
	}
}
var evenValues = [i for each (i in setVal(0, 15)) if (i % 2 == 0)];</pre>
		
<h3>Using let for block scope</h3>

Connecting certain variables with statements or blocks, effectively creating block scope variables.
		
<h4>let statement</h4>
<pre class="brush: js">var x = 5,
	y = 7,
	resultValues = ["Before let statement: " + x + ", " + y];
	
let (x=15, y=12) {
	resultValues.push("In let statement: " + x + ", " + y);
}

resultValues.push("After let statement: " + x + ", " + y);</pre>		
		
<h4>let expression</h4>
<pre class="brush: js">var x = 1,
	y = 3,
	resultValues = ["Before let expression: " + x + ", " + y];
	
let (x=7, y=8) resultValues.push("In let expression: " + x + ", " + y);

resultValues.push("After let expression: " + x + ", " + y);</pre>
		
<h4>let definition</h4>
<pre class="brush: js">var letDefinitionResults = 
		document.getElementById("results-let-definition"),
	item;
for (var i=0; i&lt;5; i++) {
	item = document.createElement("div");
	item.innerHTML = "Click me - I will say " + i;
	let j = i;
	item.onclick = function () {
		alert("I am " + j);
	};
	letDefinitionResults.appendChild(item);
}</pre>

		
<h3>Destructuring assignment</h3>

Allows you to get data from <code>array</code>s, and swap values between various <code>array</code> objects.
		
<pre class="brush: js">var a = 1,
	b = 2;
// Value swapping	
[a, b] = [b, a];</pre>
			
		
<pre class="brush: js">var a = 1,
	b = 2,
	c = 3,
	d = 4;
// Value swapping	
[a, b, c, d] = [d, c, b, a];</pre>
			

<pre class="brush: js">var a = 1,
	b = 2;

function newValues () {
	return [10, 20];
}					
	
// Assigning new values
[a, b] = newValues();</pre>
			

<pre class="brush: js">var a = 1,
	b = 2;

function newValues () {
	return [10, 20, 30];
}					

// Assigning new values, ignoring the second one
[a, , b] = newValues();</pre>
			
<h3>Destructuring assignment with let statement</h3>

Destructirung assignments can get even more powerful in conjunction with <code>let</code> statements.
			
<pre class="brush: js">var griffins = {
	father : "Peter",
	mother : "Lois",
	son : "Chris",
	daugher : "Meg",
	baby : "Stewie",
	dog : "Brian"
},
	resultValues = [];

for (let [type, name] in Iterator(griffins)) {
	resultValues.push(type + ": " + name);
}</pre>
			
			
<h2>JavaScript 1.8</h2>
<ul>
	<li>Expression closures</li>
	<li>Generator expressions</li>
	<li>
		Array extras
		<ul>
			<li>reduce</li>
			<li>reduceRight</li>
		</ul>
	</li>
</ul>

(For complete information and documentation, read <a href="https://developer.mozilla.org/en/New_in_JavaScript_1.8">New in JavaScript 1.8</a>.)
		
<h3>Expression closures</h3>

Basically, just a shorthand notation for functions.
		
<pre class="brush: js">// Notice the omission of braces and return statement
function expressionClosure () "Yeah, ok"</pre>
		
<h3>Generator expressions</h3>

Using generator expressions to complement generators introduced in JavaScript 1.7.
		
<pre class="brush: js">var animals = {
	dog : "Nice",
	cat : "Independent",
	horse : "big"
},
	resultValues = [],
	iterating = (i + 3 for (i in animals));
try {
	while (true) {
		resultValues.push(iterating.next());
	}
}
catch (err if err instanceof StopIteration) {
	resultValues.push("END OF LIST");
}</pre>

<h3>Array extras</h3>
		
<h4>reduce</h4>

Runs on each item in the <code>array</code>, collecting the results from the previous iteration.

<pre class="brush: js">var numbers = [1, 2, 3, 4, 5],
	returnValues = [];

numbers.reduce(function (prev, current, index, array) {
	returnValues.push("Previous: " + prev + ", current: " + current + ", index: " + index);
	return current;
});</pre>
		
<h4>reduceRight</h4>

Runs on each item in the <code>array</code>, collecting the results from the previous iteration, but in reverse order.

<pre class="brush: js">var numbers = [1, 2, 3, 4, 5],
	returnValues = [];

numbers.reduce(function (prev, current, index, array) {
	returnValues.push("Previous: " + prev + ", current: " + current + ", index: " + index);
	return current;
});</pre>

<h2>My own takes</h2>

Personally, I'm very excited by new features being introduced to JavaScript, and especially some of them (like the <code>let</code> statement) will change and simplify a lot of code. It's good to see a number of the other web browsers vendors being aboard with at least some of the features, although (as usual) it's disheartening to see that Internet Explorer has effectively not gotten any of these features...